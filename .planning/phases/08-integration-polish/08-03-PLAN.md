---
phase: 08-integration-polish
plan: 03
type: execute
wave: 2
depends_on: ["08-01", "08-02"]
files_modified:
  - README.md
  - CLAUDE.md
autonomous: true

must_haves:
  truths:
    - "README.md documents prerequisites, quick start, capabilities, registration, and troubleshooting"
    - "README.md shows the exact JSON to add to ~/.claude/settings.json for MCP registration"
    - "CLAUDE.md provides Claude with full tool reference, workflow patterns, device parameter guidance, and error recovery context"
    - "CLAUDE.md enables Claude to map natural language like 'filter cutoff' to actual Ableton parameter names (DEV-05)"
    - "README.md does NOT list all 50+ tools individually (categories with examples instead)"
  artifacts:
    - path: "README.md"
      provides: "Production documentation for GitHub"
      contains: "Quick Start"
    - path: "CLAUDE.md"
      provides: "Project context file for Claude Code sessions"
      contains: "Tool Reference"
  key_links:
    - from: "CLAUDE.md"
      to: "src/tools/*.js"
      via: "Documents all tool names, organized by domain module"
      pattern: "transport_|track_|mixer_|scene_|clip_|device_|sample_|session_|ableton_"
---

<objective>
Write production README.md and CLAUDE.md documentation, fulfilling DEV-05 (human-readable device parameter names) through CLAUDE.md guidance rather than code.

Purpose: README.md is the public face on GitHub -- setup, capabilities, and registration. CLAUDE.md is the secret weapon -- it teaches Claude how to use the 54 tools together as a creative co-pilot, including how to map natural language to Ableton device parameter names. Together they complete the "integration" part of "Integration & Polish."

Output: Rewritten README.md, new CLAUDE.md.
</objective>

<execution_context>
@./.claude/agents/gsd-planner.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/08-integration-polish/08-RESEARCH.md
@.planning/phases/08-integration-polish/08-CONTEXT.md
@src/tools/registry.js
@src/tools/transport.js
@src/tools/track.js
@src/tools/mixer.js
@src/tools/scene.js
@src/tools/clip.js
@src/tools/device.js
@src/tools/sample.js
@src/tools/session.js
@src/tools/health.js
@README.md
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite README.md for production</name>
  <files>README.md</files>
  <action>
  Rewrite README.md as production documentation. Structure:

  **Title + One-liner**: "Paranoid Ableton" + one paragraph describing what it does (MCP server for Claude <-> Ableton Live 12 control)

  **How It Works**: ASCII diagram showing `Claude Code <-> MCP Server (stdio) <-> AbletonOSC (UDP 11000/11001) <-> Ableton Live 12`. Brief explanation of AbletonOSC as bridge layer.

  **Prerequisites**:
  - Ableton Live 12 Suite
  - AbletonOSC Remote Script installed (link to github.com/ideoforms/AbletonOSC with brief install instructions)
  - Node.js v20+
  - Optional: AbletonOSC insert_device patch (PR #173) for device loading

  **Quick Start**:
  1. Clone repo
  2. `npm install`
  3. Install AbletonOSC in Ableton's MIDI Remote Scripts
  4. Add MCP server registration to `~/.claude/settings.json` (show exact JSON block):
     ```json
     {
       "mcpServers": {
         "ableton": {
           "command": "node",
           "args": ["/home/lwb3/ableton-mcp/src/index.js"]
         }
       }
     }
     ```
  5. Open Ableton Live, verify AbletonOSC is active
  6. Start Claude Code -- try "What tracks are in my Ableton session?"

  **Capabilities**: Organize by category (Transport, Tracks, Mixer, Scenes & Clips, MIDI Editing, Devices, Samples, Session Awareness). For each category: 1-2 sentence description + 2-3 example tool names. Do NOT list all 54 tools.

  **Configuration**: Environment variables table: LOG_LEVEL (default: info), OSC_SEND_PORT (default: 11001), OSC_RECEIVE_PORT (default: 11000), OSC_HOST (default: 127.0.0.1).

  **Troubleshooting**: Common issues:
  - "Connection timeout" -> Check Ableton running, AbletonOSC installed, ports not blocked
  - "Port already in use" -> Another OSC client is on port 11000, change via env var
  - "Device loading fails" -> Need AbletonOSC insert_device patch (PR #173)
  - "Failed to parse MCP response" -> Check for console.log calls (stdout contamination)

  **License**: MIT

  Keep README under 150 lines. No emoji. Clean markdown. The test: can someone go from zero to working in 5 minutes?
  </action>
  <verify>
  README.md exists and contains: "Quick Start", "Prerequisites", "Capabilities", registration JSON block, "Troubleshooting", "MIT".
  README.md does NOT contain individual tool definitions for all 54 tools.
  `wc -l README.md` is under 200 lines.
  </verify>
  <done>
  README.md is production-ready GitHub documentation with prerequisites, quick start, capabilities by category, registration JSON, troubleshooting, and license.
  Under 150 lines. No tool dump. Clear path from zero to working.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create CLAUDE.md with tool reference, workflow patterns, and device parameter guidance</name>
  <files>CLAUDE.md</files>
  <action>
  Create `CLAUDE.md` at project root as the context file Claude reads automatically in every session. This is the integration layer that makes Claude a creative co-pilot, not just a tool caller.

  Structure:

  **Header**: "Paranoid Ableton" + brief description. MCP server name is "ableton", tools are prefixed `mcp__ableton__`.

  **Architecture**: Module structure (osc-client.js, shared.js, registry.js, 9 domain modules). OSC communication pattern (query -> correlate by address -> return). Port defaults.

  **Tool Reference**: Complete list of ALL tools organized by domain. For each tool: name, one-line description. Group by module:
  - Health: ableton_status
  - Transport: transport_play, transport_stop, transport_record, transport_get_tempo, transport_set_tempo, transport_get_time_signature, transport_set_time_signature, transport_metronome, transport_get_state, transport_stop_all_clips
  - Track: track_list, track_create, track_rename, track_delete, track_arm, track_get
  - Mixer: mixer_get_volume, mixer_set_volume, mixer_get_pan, mixer_set_pan, mixer_get_send, mixer_set_send, mixer_mute, mixer_solo
  - Scene: scene_list, scene_create, scene_fire, scene_get, scene_name, clip_launch, clip_stop
  - Clip (MIDI): clip_create, clip_delete, clip_get, clip_set_name, clip_add_notes, clip_remove_notes, clip_get_notes, clip_set_loop
  - Device: device_list, device_get, device_toggle, device_get_parameters, device_get_parameter, device_set_parameter, device_select, device_delete, device_load
  - Sample: sample_scan, sample_search, sample_get_stats, sample_load
  - Session: session_get_state, session_get_stats
  - Utility: undo, redo, set_read_only, batch_commands

  (Read the actual tool names from each domain module file to ensure accuracy -- do NOT guess.)

  **Workflow Patterns**: The three modes per user decision:
  - "Make me a beat" (autonomous): Claude creates tracks, loads instruments, writes MIDI, adjusts mix, narrates what it's doing
  - "Help me build a beat" (collaborative): Claude proposes each step, waits for approval, adjusts based on feedback
  - "Walk me through making a beat" (educational): Claude explains concepts, lets user make decisions, teaches the production process

  Typical autonomous workflow sequence: session_get_state -> understand context -> track_create -> device_load -> clip_create -> clip_add_notes -> mixer_set_volume -> iterate

  **Device Parameter Quick Reference (DEV-05)**: Document common Ableton native device parameter names that Claude can use with device_get_parameter and device_set_parameter. This is the key to DEV-05 -- Claude reads this and maps natural language to parameter names:

  - **Wavetable**: "Osc 1 Pos" (wavetable position), "Filter Freq" (filter cutoff), "Filter Res" (resonance), "Amp Env Attack/Decay/Sustain/Release", "LFO 1 Rate", "LFO 1 Amount"
  - **Operator**: "Osc-A Level", "Osc-A Coarse", "Osc-A Fine", "Filter Freq", "Filter Res", "Volume"
  - **Drift**: "Osc Shape", "Filter Freq", "Filter Res", "Amp Attack/Decay/Sustain/Release"
  - **Simpler**: "Filter Freq", "Filter Res", "Vol < Vel" (velocity sensitivity), "S Start" (sample start), "S Length" (sample length), "Mode" (Classic/1-Shot/Slice)
  - **Drum Rack**: Access individual pads via chain index. Each pad has its own Simpler/device.
  - **EQ Eight**: "1 Frequency A", "1 Gain A", "1 Resonance A" (band 1), numbered 1-8
  - **Compressor**: "Threshold", "Ratio", "Attack", "Release", "Knee", "Output Gain"
  - **Reverb**: "Decay Time", "Room Size", "Dry/Wet"
  - **Delay**: "L Time", "R Time", "Feedback", "Dry/Wet"
  - **Auto Filter**: "Frequency", "Resonance", "Filter Type", "LFO Amount", "LFO Rate"

  Include note: "These are common names. Always use device_get_parameters first to see the exact parameter names for the specific device instance, then use device_set_parameter with the exact name."

  **Error Recovery**: How Claude should handle errors:
  - Connection timeout: server auto-reconnects. If that fails, tell user to check Ableton/AbletonOSC.
  - Parameter out of range: use device_get_parameters to check valid range, report to user.
  - Device not found: suggest checking spelling, show common device names.
  - Read-only mode: if tool is blocked, remind user to disable read-only mode.

  **Important Conventions**:
  - Track indices are 0-based
  - Volume: 0.0-1.0 normalized (0.85 = 0dB unity), or pass "0db", "-6db" etc.
  - Pan: 0-127 MIDI convention (64 = center)
  - MIDI notes: pitch 0-127 (60 = middle C), velocity 1-127
  - Beat timing: 1.0 = one beat (quarter note at 4/4)
  </action>
  <verify>
  CLAUDE.md exists at project root.
  CLAUDE.md contains "Tool Reference" with all tool names from all domain modules.
  CLAUDE.md contains "Device Parameter Quick Reference" section with Wavetable, Operator, Drift, Simpler entries.
  CLAUDE.md contains "Workflow Patterns" section.
  Tool names in CLAUDE.md match actual tool names in src/tools/*.js (cross-reference).
  </verify>
  <done>
  CLAUDE.md exists with complete tool reference (all 54 tools by domain), workflow patterns (3 modes), device parameter quick reference (DEV-05 fulfilled through documentation), error recovery guidance, and conventions.
  Claude can read this file and immediately understand how to use the entire tool ecosystem as a creative co-pilot.
  </done>
</task>

<task type="auto">
  <name>Task 3: Register MCP server in Claude Code settings</name>
  <files>~/.claude/settings.json</files>
  <action>
  Read `~/.claude/settings.json` and add the "ableton" MCP server entry to the mcpServers object. Follow the exact pattern used by the user's existing servers:

  ```json
  "ableton": {
    "command": "node",
    "args": ["/home/lwb3/ableton-mcp/src/index.js"]
  }
  ```

  Important:
  - Do NOT remove or modify any existing MCP server entries
  - Server name is "ableton" (short, consistent with "n8n", "ollama", "sqlite", "epistemic")
  - Path is absolute: `/home/lwb3/ableton-mcp/src/index.js`
  - No env vars needed (ports have sensible defaults)
  - Read the file first, merge carefully, write back

  IMPORTANT: `~/.claude/settings.json` may contain API keys for other MCP servers. Do NOT read or output the full contents of this file. Read it only to understand the structure, add the ableton entry to mcpServers, and write it back. Do NOT include file contents in any summary or output.
  </action>
  <verify>
  `node -e "const s = JSON.parse(require('fs').readFileSync(require('os').homedir() + '/.claude/settings.json', 'utf8')); console.log(s.mcpServers?.ableton ? 'registered' : 'missing')"` prints "registered".
  Existing MCP servers still present (n8n, ollama, sqlite, epistemic all still in settings).
  </verify>
  <done>
  "ableton" MCP server registered in ~/.claude/settings.json with command "node" and args ["/home/lwb3/ableton-mcp/src/index.js"].
  All existing MCP server entries preserved unchanged.
  </done>
</task>

</tasks>

<verification>
- README.md is under 200 lines and contains Quick Start with registration JSON
- CLAUDE.md contains complete tool reference for all 54 tools
- CLAUDE.md contains Device Parameter Quick Reference (DEV-05)
- MCP server registered in settings.json as "ableton"
- `node --test test/*.test.js` still passes (documentation changes don't break anything)
</verification>

<success_criteria>
1. README.md is production-ready with prerequisites, quick start, registration, troubleshooting
2. CLAUDE.md provides complete project context for Claude Code sessions
3. DEV-05 (human-readable device parameter names) fulfilled via CLAUDE.md parameter guidance
4. DEV-06 (preset browsing) skipped -- AbletonOSC has no browser API (per research)
5. MCP server registered as "ableton" in Claude Code settings
6. All existing MCP servers and tests unaffected
</success_criteria>

<output>
After completion, create `.planning/phases/08-integration-polish/08-03-SUMMARY.md`
</output>
